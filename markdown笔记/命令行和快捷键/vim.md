### 使用vimrc对vim定制

- rc=run command

- 系统级vimrc：对系统所有用户都生效 用户级vimrc：对个别用户生效

- 每一行作为一个命令执行

#### vimrc使用

```:e ~/.vimrc```：编辑vimrc

system vimrc file: ```VIM/vimrc```
user vimrc file: ```$HOME/.vimrc```
2nd user vimrc file: ```~/.vim/vimrc```



### vim的四种模式

#### 普通模式

- 打开默认模式

- 移查删改

```''```：注释

```/search```/```?search```：查找search

##### 移动

```shell
k：上移 j：下移 h：左移 l：右移
^/0：移动到行首/包含缩进空格
$： 移动到行尾巴
w/W：正向移动到下一个单词词首，大写W不包含特殊字符
b/B：反向移动到下一个单词词首
e/E：正向移动到下一单词词尾，大写E不包含特殊字符
ge：反向移动到下一单词词尾
```

##### 跳转

```shell
Ctrl+f/F：下一页 Forward
Ctrl+b/B：上一页 Backward
Ctrl+d/u：向下/上翻半页
gg：跳转到文件首行
<Line_Number>gg/G：跳转到指定行
G：跳转到最后一行
g Ctrl-g/G：查看文件信息，先按g更加详细
```

##### 缩进

```
>> / :> 右缩进
<< / :< 左缩进
:m,n> / :m>(n-m+1) m到n行缩进 / 从m开始缩进n行（包含m行）
(:m>n 等价于命令 :m,m+n-1>)
```

#### 可视visual(```v```)

- 对一整块区域进行操作

类似用鼠标对大段内容选取

#### 插入insert(```i```)

- 添加文本

#### 命令

- ``` :h vim-modes-intro``` vim内置文档
- ```:version``` 查看vim版本

  

### 删除，复制和粘贴

| windows |  vim   |                    不同处                     |
| :-----: | :----: | :-------------------------------------------: |
|   cut   | delete |           和cut相同，而不是直接删除           |
|  copy   |  yank  | 等同于复制，但由于c用于修改(change)而使用yank |
|  paste  |  put   |                   粘贴相同                    |

| 按键操作                                                     | 定义                |
| ------------------------------------------------------------ | ------------------- |
| ```d``` = delete = cut ```dd```：删除整行                    | 剪切                |
| ```y``` = yank ≈ copy ```yy```：复制整行 ```yw```：复制当前光标单词 ```y2w```：复制正向两个单词 | 类似于复制          |
| ```p/P``` = put ≈ paste                                      | 粘贴到光标后/光标前 |
| ```u``` = undo                                               | 撤销之前的操作      |
| ```Ctrl-r``` = redo                                          | 重做/恢复之前的操作 |

#### 组合删除

**[count]operation / [count]{motion}**

| [count]operation / [count]{motion} | 定义                                                         |
| ---------------------------------- | ------------------------------------------------------------ |
| ```x/X```                          | 删除光标下/前单个字符                                        |
| ```dw```(d=delete w=word)          | 删除一个单词（必须在词首）                                   |
| ```d{hjkl}```                      | 删除到上下左右一个操作前的字符，```dk```删除上面一整行,```dj```删除下面一整行 |
| ```d$```/```D```                   | 删除光标到行位的字符                                         |
| ```d^```                           | 删除光标到行首的字符                                         |
| ```dd```                           | 删除当前整行                                                 |
| ```{n}dd```                        | 向下删除n行（包括当前行）                                    |
| ```5dw```                          | 删除正向单词五次                                             |
| ```3w```                           | 正向移动单词三次                                             |
| ```D3w```                          | 正向删除3w动作                                               |
| ```2d3w```                         | 正向删除3w动作 两次                                          |

#### 寄存器

```:register```/```:reg```：查看寄存器

```:h reg```：查看帮助文档

|    类型    |           含义           |    表达方式    |     举例     |                       特点                        |
| :--------: | :----------------------: | :------------: | :----------: | :-----------------------------------------------: |
| 无名寄存器 |        默认寄存器        |       ""       |    "" p=p    |                 会被最后一条覆盖                  |
| 数字寄存器 | “+{0-9} 缓存最近10次操作 | "0<br />"{0-9} | "0p<br />"1p | 0用于复制专用<br />1-9用于最近9次行删除或修改记录 |
| 有名寄存器 |       26英文字命名       |  "[a-z]/[A-Z]  |     "ayw     |            "A会通过^J追加到" a寄存器中            |
| 黑洞寄存器 |         有去无回         |       "_       |     "_dw     |           只想删除而不想覆盖无名寄存器            |



### 修改，查找和替换

#### 修改

|  按键操作   |                   定义                    |
| :---------: | :---------------------------------------: |
|  Shift+i/A  |          插入模式并移动到行首/尾          |
|     a/i     |               光标后/前插入               |
| [n]+O/o+ESC | 行前/后插入n次，再按```ESC```可以看到效果 |
|  [n]+i+ESC  |              插入模式重复n次              |

#### 转换

|          按键操作           |                  定义                   |
| :-------------------------: | :-------------------------------------: |
|              ~              |           单个字符大小写转换            |
| g ~ w （这里的w表示motion） |     单词大小写转换，**必须在行首**      |
|         g ~ $/g ~ ~         |             整行大小写转换              |
|        gU/uw (upper)        | 单词转换成大/小写，**不必在行首**，推荐 |

#### 查找

|      按键操作      |                         定义                         |
| :----------------: | :--------------------------------------------------: |
|     F/f{char}      |                向下/向上查找单个字符                 |
|      t{char}       |            查找字符前一个字符*好像没啥用*            |
| dt{char}/df{space} |             删除光标到查找字符之间的字符             |
|      /{char}       | 命令行查找，```n```向下逐个查找，```N```向上逐个查找 |

#### 查找替换

语法：[range]s(ubstitute)/{pattern}/{string}/[flags]  

|      按键操作      |             定义             |
| :----------------: | :--------------------------: |
| s/going/rolling/g  | 当前行所有going替换成rolling |
| %s/going/rolling/g |        %匹配所有范围         |

 #### 直接替换

|                        按键操作                         |                             定义                             |
| :-----------------------------------------------------: | :----------------------------------------------------------: |
|                        Shift+r/R                        | 替换模式，按```ESC```退出```REPLCE```模式，*直接覆盖写了，类似我按了平常误按了insert* |
|                            r                            |                         单个字符替换                         |
| cw（```c```已经被```change```占领了，只能用```yank```） |               修改单个字符，效果类似```dwi```                |
|                   c$/C 类似于d操作符                    |                     修改光标之后行内内容                     |



### 多窗口操作（分屏）与标签分组

#### 多窗口（分屏）操作

都是Ctrl+w, w:window

|              指令               |              含义              |
| :-----------------------------: | :----------------------------: |
|        ```vim O/o[n]```         | 水平/垂直分屏 n：数字，o：open |
| ```Ctrl+w c/q``` c:close q:quit | 关闭当前窗口/最后一个窗口时退  |
|      ```Ctrl+w s```s:split      |     上下分割当前打开的文件     |
|       ```:sp filename```        |  上下分割，并打开一个新的文件  |
|         ```Ctrl+w v```          |     左右分割当前打开的文件     |
|       ```:vsp filename```       |  左右分割，并打开一个新的文件  |

#### 移动分屏和尺寸变动

|      指令       |        含义        |
| :-------------: | :----------------: |
| ```Ctrl+ w K``` |      向上移动      |
| ```Ctrl+ w J``` |      向下移动      |
| ```Ctrl+ w L``  |      向右移动      |
| ```Ctrl+ w H``` |      向左移动      |
| ```Ctrl+ w +``` |      增加高度      |
| ```Ctrl+ w -``` |      减少高度      |
| ```Ctrl+ w =``` | 让所有屏的高度一致 |

#### 标签

标签就是容纳一系列窗口的容器，类似浏览器的标签

|           指令           |              含义               |
| :----------------------: | :-----------------------------: |
|  ```:tabnew filename```  |           新建标签页            |
|      ```:tabfind```      |   查找并在新标签页中打开文件    |
|       ```:tabs```        |     显示已打开标签页的列表      |
|     ```:tabclose```      |         关闭当前标签页          |
|      ```:tabonly```      |      仅保留当前标签页打开       |
| ```:tabn/p/first/last``` | 移动到下/上/第一/最后一个标签页 |
|       ```:tabm```        |   将当前标签页放置到指定位置    |

#### 标签操作和命令键

|                          指令                          |                             含义                             |
| :----------------------------------------------------: | :----------------------------------------------------------: |
|                       ```gt/T```                       |              移动到下/上一个标签（命令模式下）               |
|                      ```{i}gt```                       |                      移动到i位置的标签                       |
|         ```noremap <C-L> <Esc>:tabnext<CR>```          |                     vimrc中自定义快捷键                      |
| ```noremap <C-H>``` <br />```<Esc>: tabprevious<CR>``` |                     vimrc中自定义快捷键                      |
|                      ```:tabe```                       |                     编辑标签中的某个文件                     |
|                ```tabm 0 ```/```tabm```                | 移动当前tab到第一个/最后一个。0相当于第一个。和```:tabnfirst```/```:tabnlast```效果相同 |
|                     ```tabm {i}```                     |                     移动当前tab到i+1位置                     |



### 文本对象和宏







### 缓冲区和多文件编辑

#### 缓冲区

Buffer是内存中的一块缓冲区域，用于临时存放vim打开过的文件

##### 缓冲区操作

|               指令               |                             含义                             |
| :------------------------------: | :----------------------------------------------------------: |
|        ```:bp```(revious)        |                         上一个缓冲区                         |
|          ```:bn```(ext)          |                         下一个缓冲区                         |
|         ```:bf```(irst)          |                        到第一个缓冲区                        |
|          ```:bl```(ast)          |                       到最后一个缓冲区                       |
| ```:b buffer Number/File_name``` |                          指定缓冲区                          |
|           ```:ball```            |                        编辑所有缓冲区                        |
|        ```Ctrl + ^/b#```         |               切换到前一个buffer（交换buffer）               |
|           ```:qall!```           |                        退出全部缓冲区                        |
|           ```:wall!```           |                        写入全部缓冲区                        |
|           ```:badd```            |            添加一个新缓冲区，但不设置为当前缓冲区            |
|         ```:bd```(elete)         |                          删除缓冲区                          |
| ```:n,m/%bd```(```%```匹配所有)  |                删除n到m编号/所有的缓冲区文件                 |
|        ```bufdo {CMD}```         | ```bufdo set number```/```bufdo set nonumber```，批量操作缓冲区列表 |
|          ```:E /:bd```           |              打开文件目录列表/返回到最初buffer               |



##### 缓冲区列表

查看：```:files``` / ```:buffers``` / ```:ls```

**详细解释**

1. ```1```：缓冲区序列号
2. ```#/%a```：指示状态，当前文件是active
3. 文件名
4. 光标位置

**缓冲区列表指示状态**

| 标记 |                 含义                 |
| :--: | :----------------------------------: |
|  a   |    激活缓冲区，缓冲区被加载且显示    |
|  h   |   隐藏缓冲区，缓冲区被加载但不显示   |
|  %   |       当前缓冲区。光标所在位置       |
|  #   |              交换缓冲区              |
|  =   |              只读缓冲区              |
|  +   |            已经更改缓冲区            |
|  -   | 不可改缓冲区，'modifiable'选项不置位 |



### TIPS

- ```.```：对上一个动作的重复，类似excel中的F4

- 大写和很多快捷键的效果是类似的

  

